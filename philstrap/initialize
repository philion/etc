#!/bin/bash

# git clone git@github.com:philion/etc.git; etc/philstrap/initialize

# a simple init script

# home=$HOME
home=$PWD

# philstrap_home
philstrap_home="$(cd "$(dirname "$0")"; pwd)"

# setup all the links after the git clone

# bin
if [ ! -e "$home/bin" ]
then
    mkdir -p "$home/bin"
fi

# for each file
for file in $philstrap_home/bin/*
do    
    if [ -f "$home/bin/$file" ]
    then
        echo skipping $home/bin/$file
    else
        name=$(basename "$file")
        echo "$file" -> "$home/bin/$name"
        ln -s "$file" "$home/bin/$name"
    fi
done

# for each dotfile
for file in $philstrap_home/dotfiles/dot.*
do    
    name=$(basename "$file")
    dotname=".${name:4}"
    
    if [ -f "$home/$dotname" ]
    then
        mv "$home/$dotname" "$home/dot$dotname"
    fi
    echo "$file" -> "$home/bin/$name"
    ln -s "$file" "$home/$dotname"
done

# git clone git@github.com:philion/etc.git; etc/philstrap/initialize